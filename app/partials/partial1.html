<div class="container">

  <div class="navbar">
    <a href="#" class="navbar-brand">3vent</a>
    <p class="navbar-text pull-right">
      <span ng-show="username">
	Logged in as {{username}}
      </span>
      <span ng-show="!username">
	<button id="login" ng-click="login()">Log In</button>
      </span>    

      <span>
	<div class="btn-group pull-right">
	  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
	    FB INFO <span class="caret"></span>
	  </button>
	  <ul class="dropdown-menu">
	    <li ng-show="pullingFB">Facebook refresh in progress</li>
	    <li><a href="javascript:void(0)" ng-show="!pullingFB" ng-click="repullFB()">Refresh events from Facebook</a></li>
	  </ul>
	</div>
      </span>

    </p>
  </div>
  <div class="row">
    <!-- filters -->
    <div class="col-lg-3">
      <div class="panel panel-info">
	<div class="panel-heading">
	  <span class="navHeader">Who</span>
	</div>
	
	Number of people invited:
	<br/>

        <slider floor="1" ceiling="200" ng-model-low="minInvited" ng-model-high="maxInvited"></slider>

	
	Number of people attending:
	<br/>

        <slider floor="1" ceiling="200" ng-model-low="minAttending" ng-model-high="maxAttending"></slider>
      </div>

      <div class="panel panel-info">
	<div class="panel-heading">
	  <span class="navHeader">What</span>
	</div>
	Search for text:
	<input type="text" ng-model="textSearchQuery"></input>
      </div>

      <div class="panel panel-info">
	<div class="panel-heading">
	  <span class="navHeader">Where</span>
	</div>
	  Search for a location:
	  <input type="text" ng-model="locationSearchQuery"></input>
      </div>

	<div class="panel panel-info">
	  <div class="panel-heading">
	    <span class="navHeader">When</span>
	  </div>
	  starts after:
	  <datepicker ng-model="dtStarts" show-weeks="true" starting-day="1" max="'2015-06-22'"></datepicker>
	  
	  ends before:
	  <datepicker ng-model="dtEnds" show-weeks="true" starting-day="1" max="'2015-06-22'"></datepicker>

	</div>

    </div>

    <!-- list display -->
    <div class="col-lg-9" id="eventList">
      <span class="pull-right" ng-show="filteredVar.length">Found: {{filteredVar.length}} </span>
      <span class="pull-right" ng-show="!events.length">Loading...</span>
      <ul class="eventListUL">    
	<li ng-repeat="event in (filteredVar = (events | filter:filters) | startFrom:(currentPage-1)*numPerPage | limitTo:numPerPage | orderBy:sortFunc)">
	  <div class="panel panel-primary">
	    <div class="panel-heading">
	      <a class="eventLink" href="http://facebook.com/events/{{event.eid}}"><h4>{{event.name}}</h4></a>
	    </div>
	      <img src="{{event.pic}}" class="pull-right eventImg"></img>

	      <ul class="eventInner">
		<li><strong>Starts:</strong> {{event.pretty_start}}</li>
		<li><strong>Location:</strong> {{event.pretty_location}}
	      </ul>
	    <br/>
	      {{event.description.slice(0,200)+ "..."}} 
	      

	  </div>
	</li>
      </ul>
    </div>
  </div>
  <div class="row filterBody">
    <!-- <pagination num-pages="numEvents()" current-page="currentPage" max-size="maxSize" boundary-links="true"></div> -->
    <pager num-pages="numPages()" current-page="currentPage"></pager>
  </div>
</div>
